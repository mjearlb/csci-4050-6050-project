<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>Register</title>
        
    </head>
    <style>
        body{
            background-color: rgb(221, 220, 220);
            color:  rgb(221, 220, 220);
        }

        .body-text{
            color:  rgb(0, 0, 0);
            text-align: center;
        }

        .body-header{
            color: rgb(0,0,0);
            text-align: center;
        }
    </style>
    <body>
        <div class="body-header">
        <h2>Register an Account:</h2>
        </div>
        <div class="body-text">
        <form id="registerForm">
            <label for="username">Username:</label><br>
            <input type="text" id="username" name="username" size="30"><br>
            <label for="password">Password:</label><br>
            <input type="password" id="password" name="password" size="30"><br>
            <label for="firstname">First Name:</label><br>
            <input type="text" id="firstname" name="firstname" size="30"><br>
            <label for="lastname">Last Name:</label><br>
            <input type="text" id="lastname" name="lastname" size="30"><br>
            <label for="email">Email:</label><br>
            <input type="text" id="email" name="email" size="30">
            
            
            <p>

            </p>
            <button type="submit">Create Account</button>
        </form>
        </div>
        
        <script>
        document.addEventListener('DOMContentLoaded', () => {
            document.getElementById('registerForm').addEventListener('submit', async (event) => {
                event.preventDefault();
                const formData = new FormData(document.getElementById('registerForm'));
                const username = formData.get('username');
                const password = formData.get('password');
                const first_name = formData.get('firstname');
                const last_name = formData.get('lastname');
                const email = formData.get('email');
                const code = formData.get('code');
                
            
                try {
                    const response = await fetch('/users/registerUser', {
                        method: 'POST',
                        headers: {
                            'Content-Type': 'application/json'
                        },
                        body: JSON.stringify({ username, last_name, first_name, email, password })
                    });
                    if (response) {
                        alert('Account successfully created.');
                        window.location.href = `/home/${username}`;
                    } else {
                        alert('Account creation failed.');
                    }
                } catch (error) {
                    console.error('Error:', error);
                    //deleteForErrorDisplay document.getElementById('message').innerText = 'An error occurred. Please try again later.';
                }
            
            });
        });
        
        
        </script>
    </body>
</html>